{"version":3,"sources":["webpack:///./app/javascript/mastodon/components/admin/ImpactReport.jsx"],"names":["ImpactReport","PureComponent","constructor","arguments","state","loading","data","componentDidMount","domain","this","props","params","include_subdomains","api","post","keys","start_at","end_at","instance_accounts","instance_follows","instance_followers","then","res","setState","catch","err","console","error","render","_jsx","className","FormattedMessage","id","defaultMessage","Skeleton","width","FormattedNumber","value","total","classNames","negative"],"mappings":"2MAUe,MAAMA,UAAqBC,gBAAcC,cAAA,SAAAC,WAAA,KAMtDC,MAAQ,CACNC,SAAS,EACTC,KAAM,KACN,CAEFC,oBACE,MAAM,OAAEC,GAAWC,KAAKC,MAElBC,EAAS,CACbH,OAAQA,EACRI,oBAAoB,GAGtBC,cAAMC,KAAK,yBAA0B,CACnCC,KAAM,CAAC,oBAAqB,mBAAoB,sBAChDC,SAAU,KACVC,OAAQ,KACRC,kBAAmBP,EACnBQ,iBAAkBR,EAClBS,mBAAoBT,IACnBU,MAAKC,IACNb,KAAKc,SAAS,CACZlB,SAAS,EACTC,KAAMgB,EAAIhB,MACV,IACDkB,OAAMC,IACPC,QAAQC,MAAMF,EAAI,GAEtB,CAEAG,SACE,MAAM,QAAEvB,EAAO,KAAEC,GAASG,KAAKL,MAE/B,OACEyB,YAAA,OAAKC,UAAU,kBAAW,EACxBD,YAAA,eAAIA,YAACE,IAAgB,CAACC,GAAE,4BAA6BC,eAAe,oBAEpEJ,YAAA,kBACEA,YAAA,kBACEA,YAAA,MAAIC,UAAU,wBAAiB,EAC7BD,YAAA,MAAIC,UAAU,6BAAsB,EAClCD,YAACE,IAAgB,CAACC,GAAE,wCAAyCC,eAAe,yCAG9EJ,YAAA,MAAIC,UAAU,+BAAwB,EACnCzB,EAAUwB,YAACK,IAAQ,CAACC,MAAO,KAASN,YAACO,IAAe,CAACC,MAAO/B,EAAK,GAAGgC,UAIzET,YAAA,MAAIC,UAAWS,IAAW,kBAAmB,CAAEC,UAAWnC,GAAWC,EAAK,GAAGgC,MAAQ,UAAK,EACxFT,YAAA,MAAIC,UAAU,6BAAsB,EAClCD,YAACE,IAAgB,CAACC,GAAE,uCAAwCC,eAAe,sCAG7EJ,YAAA,MAAIC,UAAU,+BAAwB,EACnCzB,EAAUwB,YAACK,IAAQ,CAACC,MAAO,KAASN,YAACO,IAAe,CAACC,MAAO/B,EAAK,GAAGgC,UAIzET,YAAA,MAAIC,UAAWS,IAAW,kBAAmB,CAAEC,UAAWnC,GAAWC,EAAK,GAAGgC,MAAQ,UAAK,EACxFT,YAAA,MAAIC,UAAU,6BAAsB,EAClCD,YAACE,IAAgB,CAACC,GAAE,yCAA0CC,eAAe,oCAG/EJ,YAAA,MAAIC,UAAU,+BAAwB,EACnCzB,EAAUwB,YAACK,IAAQ,CAACC,MAAO,KAASN,YAACO,IAAe,CAACC,MAAO/B,EAAK,GAAGgC,YAOnF,E","file":"js/433-66e1aeafecb3063a4b16.chunk.js","sourcesContent":["import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { FormattedNumber, FormattedMessage } from 'react-intl';\n\nimport classNames from 'classnames';\n\nimport api from 'mastodon/api';\nimport { Skeleton } from 'mastodon/components/skeleton';\n\nexport default class ImpactReport extends PureComponent {\n\n  static propTypes = {\n    domain: PropTypes.string.isRequired,\n  };\n\n  state = {\n    loading: true,\n    data: null,\n  };\n\n  componentDidMount () {\n    const { domain } = this.props;\n\n    const params = {\n      domain: domain,\n      include_subdomains: true,\n    };\n\n    api().post('/api/v1/admin/measures', {\n      keys: ['instance_accounts', 'instance_follows', 'instance_followers'],\n      start_at: null,\n      end_at: null,\n      instance_accounts: params,\n      instance_follows: params,\n      instance_followers: params,\n    }).then(res => {\n      this.setState({\n        loading: false,\n        data: res.data,\n      });\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  render () {\n    const { loading, data } = this.state;\n\n    return (\n      <div className='dimension'>\n        <h4><FormattedMessage id='admin.impact_report.title' defaultMessage='Impact summary' /></h4>\n\n        <table>\n          <tbody>\n            <tr className='dimension__item'>\n              <td className='dimension__item__key'>\n                <FormattedMessage id='admin.impact_report.instance_accounts' defaultMessage='Accounts profiles this would delete' />\n              </td>\n\n              <td className='dimension__item__value'>\n                {loading ? <Skeleton width={60} /> : <FormattedNumber value={data[0].total} />}\n              </td>\n            </tr>\n\n            <tr className={classNames('dimension__item', { negative: !loading && data[1].total > 0 })}>\n              <td className='dimension__item__key'>\n                <FormattedMessage id='admin.impact_report.instance_follows' defaultMessage='Followers their users would lose' />\n              </td>\n\n              <td className='dimension__item__value'>\n                {loading ? <Skeleton width={60} /> : <FormattedNumber value={data[1].total} />}\n              </td>\n            </tr>\n\n            <tr className={classNames('dimension__item', { negative: !loading && data[2].total > 0 })}>\n              <td className='dimension__item__key'>\n                <FormattedMessage id='admin.impact_report.instance_followers' defaultMessage='Followers our users would lose' />\n              </td>\n\n              <td className='dimension__item__value'>\n                {loading ? <Skeleton width={60} /> : <FormattedNumber value={data[2].total} />}\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n\n}\n"],"sourceRoot":""}