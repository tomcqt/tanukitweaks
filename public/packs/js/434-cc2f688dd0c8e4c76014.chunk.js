(window.webpackJsonp=window.webpackJsonp||[]).push([[434],{888:function(e,t,s){"use strict";s.r(t);var a=s(0),o=s(2),i=s(7),l=s(39),r=s(9),d=s.n(r),c=s(6);const n=Object(i.d)({legal:{id:"report.categories.legal",defaultMessage:"Legal"},other:{id:"report.categories.other",defaultMessage:"Other"},spam:{id:"report.categories.spam",defaultMessage:"Spam"},violation:{id:"report.categories.violation",defaultMessage:"Content violates one or more server rules"}});class p extends o.PureComponent{constructor(){super(...arguments),this.handleClick=()=>{const{id:e,disabled:t,onSelect:s}=this.props;t||s(e)}}render(){const{id:e,text:t,disabled:s,selected:o,children:i}=this.props;return Object(a.a)("div",{tabIndex:0,role:"button",className:d()("report-reason-selector__category",{selected:o,disabled:s}),onClick:this.handleClick},void 0,o&&Object(a.a)("input",{type:"hidden",name:"report[category]",value:e}),Object(a.a)("div",{className:"report-reason-selector__category__label"},void 0,Object(a.a)("span",{className:d()("poll__input",{active:o,disabled:s})}),t),o&&i&&Object(a.a)("div",{className:"report-reason-selector__category__rules"},void 0,i))}}class h extends o.PureComponent{constructor(){super(...arguments),this.handleClick=()=>{const{id:e,disabled:t,onToggle:s}=this.props;t||s(e)}}render(){const{id:e,text:t,disabled:s,selected:o}=this.props;return Object(a.a)("div",{tabIndex:0,role:"button",className:d()("report-reason-selector__rule",{selected:o,disabled:s}),onClick:this.handleClick},void 0,Object(a.a)("span",{className:d()("poll__input",{checkbox:!0,active:o,disabled:s})}),o&&Object(a.a)("input",{type:"hidden",name:"report[rule_ids][]",value:e}),t)}}class u extends o.PureComponent{constructor(){super(...arguments),this.state={category:this.props.category,rule_ids:this.props.rule_ids||[],rules:[]},this._save=()=>{const{id:e,disabled:t}=this.props,{category:s,rule_ids:a}=this.state;t||Object(c.a)().put(`/api/v1/admin/reports/${e}`,{category:s,rule_ids:a}).catch((e=>{console.error(e)}))},this.handleSelect=e=>{this.setState({category:e},(()=>this._save()))},this.handleToggle=e=>{const{rule_ids:t}=this.state;t.includes(e)?this.setState({rule_ids:t.filter((t=>t!==e))},(()=>this._save())):this.setState({rule_ids:[...t,e]},(()=>this._save()))}}componentDidMount(){Object(c.a)().get("/api/v1/instance").then((e=>{this.setState({rules:e.data.rules})})).catch((e=>{console.error(e)}))}render(){const{disabled:e,intl:t}=this.props,{rules:s,category:o,rule_ids:i}=this.state;return Object(a.a)("div",{className:"report-reason-selector"},void 0,Object(a.a)(p,{id:"other",text:t.formatMessage(n.other),selected:"other"===o,onSelect:this.handleSelect,disabled:e}),Object(a.a)(p,{id:"legal",text:t.formatMessage(n.legal),selected:"legal"===o,onSelect:this.handleSelect,disabled:e}),Object(a.a)(p,{id:"spam",text:t.formatMessage(n.spam),selected:"spam"===o,onSelect:this.handleSelect,disabled:e}),Object(a.a)(p,{id:"violation",text:t.formatMessage(n.violation),selected:"violation"===o,onSelect:this.handleSelect,disabled:e},void 0,s.map((t=>Object(a.a)(h,{id:t.id,text:t.text,selected:i.includes(t.id),onToggle:this.handleToggle,disabled:e},t.id)))))}}t.default=Object(l.c)(u)}}]);
//# sourceMappingURL=434-cc2f688dd0c8e4c76014.chunk.js.map