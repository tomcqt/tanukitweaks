(window.webpackJsonp=window.webpackJsonp||[]).push([[435],{889:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return l}));var n=a(0),i=a(2),d=a(7),o=a(20),c=a(9),r=a.n(c),s=a(6),b=a(130);class l extends i.PureComponent{constructor(){super(...arguments),this.state={loading:!0,data:null}}componentDidMount(){const{start_at:e,end_at:t,frequency:a}=this.props;Object(s.a)().post("/api/v1/admin/retention",{start_at:e,end_at:t,frequency:a}).then((e=>{this.setState({loading:!1,data:e.data})})).catch((e=>{console.error(e)}))}render(){const{loading:e,data:t}=this.state,{frequency:a}=this.props;let i;i=e?Object(n.a)(o.a,{id:"loading_indicator.label",defaultMessage:"Loading..."}):Object(n.a)("table",{className:"retention__table"},void 0,Object(n.a)("thead",{},void 0,Object(n.a)("tr",{},void 0,Object(n.a)("th",{},void 0,Object(n.a)("div",{className:"retention__table__date retention__table__label"},void 0,Object(n.a)(o.a,{id:"admin.dashboard.retention.cohort",defaultMessage:"Sign-up month"}))),Object(n.a)("th",{},void 0,Object(n.a)("div",{className:"retention__table__number retention__table__label"},void 0,Object(n.a)(o.a,{id:"admin.dashboard.retention.cohort_size",defaultMessage:"New users"}))),t[0].data.slice(1).map(((e,t)=>Object(n.a)("th",{},e.date,Object(n.a)("div",{className:"retention__table__number retention__table__label"},void 0,t+1))))),Object(n.a)("tr",{},void 0,Object(n.a)("td",{},void 0,Object(n.a)("div",{className:"retention__table__date retention__table__average"},void 0,Object(n.a)(o.a,{id:"admin.dashboard.retention.average",defaultMessage:"Average"}))),Object(n.a)("td",{},void 0,Object(n.a)("div",{className:"retention__table__size"},void 0,Object(n.a)(d.c,{value:t.reduce(((e,t,a)=>e+(1*t.data[0].value-e)/(a+1)),0),maximumFractionDigits:0}))),t[0].data.slice(1).map(((e,a)=>{const i=t.reduce(((e,t,n)=>t.data[a+1]?e+(t.data[a+1].rate-e)/(n+1):e),0);return Object(n.a)("td",{},e.date,Object(n.a)("div",{className:r()("retention__table__box","retention__table__average",`retention__table__box--${Object(b.c)(100*i)}`)},void 0,Object(n.a)(d.c,{value:i,style:"percent"})))})))),Object(n.a)("tbody",{},void 0,t.slice(0,-1).map((e=>Object(n.a)("tr",{},e.period,Object(n.a)("td",{},void 0,Object(n.a)("div",{className:"retention__table__date"},void 0,(e=>"day"===e.frequency?Object(n.a)(d.a,{value:e.period,month:"long",day:"2-digit",timeZone:"UTC"}):Object(n.a)(d.a,{value:e.period,month:"long",year:"numeric",timeZone:"UTC"}))(e))),Object(n.a)("td",{},void 0,Object(n.a)("div",{className:"retention__table__size"},void 0,Object(n.a)(d.c,{value:e.data[0].value}))),e.data.slice(1).map((e=>Object(n.a)("td",{},e.date,Object(n.a)("div",{className:r()("retention__table__box",`retention__table__box--${Object(b.c)(100*e.rate)}`)},void 0,Object(n.a)(d.c,{value:e.rate,style:"percent"}))))))))));let c=null;if("day"===a)c=Object(n.a)(o.a,{id:"admin.dashboard.daily_retention",defaultMessage:"User retention rate by day after sign-up"});else c=Object(n.a)(o.a,{id:"admin.dashboard.monthly_retention",defaultMessage:"User retention rate by month after sign-up"});return Object(n.a)("div",{className:"retention"},void 0,Object(n.a)("h4",{},void 0,c),i)}}}}]);
//# sourceMappingURL=435-02a570ce4e70624752d9.chunk.js.map