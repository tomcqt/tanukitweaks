{"version":3,"sources":["webpack:///./app/javascript/mastodon/features/followed_tags/index.jsx"],"names":["messages","defineMessages","heading","id","defaultMessage","FollowedTags","ImmutablePureComponent","constructor","arguments","handleLoadMore","_debounce","this","props","dispatch","expandFollowedHashtags","leading","componentDidMount","fetchFollowedHashtags","render","intl","hashtags","isLoading","hasMore","multiColumn","emptyMessage","_jsx","FormattedMessage","Column","bindToDocument","ColumnHeader","icon","title","formatMessage","showBackButton","ScrollableList","scrollKey","onLoadMore","map","hashtag","Hashtag","name","get","to","withGraph","people","getIn","history","reverse","day","toArray","Helmet","content","propTypes","params","PropTypes","object","isRequired","func","ImmutablePropTypes","list","bool","connect","state","injectIntl"],"mappings":"6PAkBA,MAAMA,EAAWC,YAAe,CAC9BC,QAAS,CAAEC,GAAG,gBAAkBC,eAAe,uBASjD,MAAMC,UAAqBC,IAAuBC,cAAA,SAAAC,WAAA,KAgBhDC,eAAiBC,KAAS,KACxBC,KAAKC,MAAMC,SAASC,cAAyB,GAC5C,IAAK,CAAEC,SAAS,GAAQ,CAN3BC,oBACEL,KAAKC,MAAMC,SAASI,cACtB,CAMAC,SACE,MAAM,KAAEC,EAAI,SAAEC,EAAQ,UAAEC,EAAS,QAAEC,EAAO,YAAEC,GAAgBZ,KAAKC,MAE3DY,EAAeC,YAACC,IAAgB,CAACvB,GAAE,6BAA8BC,eAAe,iFAEtF,OACEqB,YAACE,IAAM,CAACC,gBAAiBL,QAAY,EACnCE,YAACI,IAAY,CACXC,KAAK,UACLC,MAAOZ,EAAKa,cAAchC,EAASE,SACnC+B,gBAAc,EACdV,YAAaA,IAGfE,YAACS,IAAc,CACbC,UAAU,gBACVX,aAAcA,EACdF,QAASA,EACTD,UAAWA,EACXe,WAAYzB,KAAKF,eACjBmB,gBAAiBL,QAAY,EAE5BH,EAASiB,KAAKC,GACbb,YAACc,IAAO,CAENC,KAAMF,EAAQG,IAAI,QAClBC,GAAK,SAAQJ,EAAQG,IAAI,UACzBE,WAAW,EAEXC,OAAoD,EAA5CN,EAAQO,MAAM,CAAC,UAAW,EAAG,aAA+D,EAA5CP,EAAQO,MAAM,CAAC,UAAW,EAAG,aACrFC,QAASR,EAAQG,IAAI,WAAWM,UAAUV,KAAKW,GAAQA,EAAIP,IAAI,UAASQ,WANnEX,EAAQG,IAAI,YAWvBhB,YAACyB,IAAM,UACLzB,YAAA,QAAMe,KAAK,SAASW,QAAQ,aAIpC,EA5DI9C,EAEG+C,UAAY,CACjBC,OAAQC,IAAUC,OAAOC,WACzB3C,SAAUyC,IAAUG,KAAKD,WACzBrC,KAAMmC,IAAUC,OAAOC,WACvBpC,SAAUsC,IAAmBC,KAC7BtC,UAAWiC,IAAUM,KACrBtC,QAASgC,IAAUM,KACnBrC,YAAa+B,IAAUM,MAuDZC,6BAtESC,IAAK,CAC3B1C,SAAU0C,EAAMjB,MAAM,CAAC,gBAAiB,UACxCxB,UAAWyC,EAAMjB,MAAM,CAAC,gBAAiB,cAAc,GACvDvB,UAAWwC,EAAMjB,MAAM,CAAC,gBAAiB,YAmE5BgB,CAAyBE,YAAW1D,G","file":"js/features/followed_tags-424929f77e260742eac4.chunk.js","sourcesContent":["import PropTypes from 'prop-types';\n\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\n\nimport { Helmet } from 'react-helmet';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport { connect } from 'react-redux';\n\nimport { debounce } from 'lodash';\n\nimport { expandFollowedHashtags, fetchFollowedHashtags } from 'mastodon/actions/tags';\nimport ColumnHeader from 'mastodon/components/column_header';\nimport Hashtag from 'mastodon/components/hashtag';\nimport ScrollableList from 'mastodon/components/scrollable_list';\nimport Column from 'mastodon/features/ui/components/column';\n\nconst messages = defineMessages({\n  heading: { id: 'followed_tags', defaultMessage: 'Followed hashtags' },\n});\n\nconst mapStateToProps = state => ({\n  hashtags: state.getIn(['followed_tags', 'items']),\n  isLoading: state.getIn(['followed_tags', 'isLoading'], true),\n  hasMore: !!state.getIn(['followed_tags', 'next']),\n});\n\nclass FollowedTags extends ImmutablePureComponent {\n\n  static propTypes = {\n    params: PropTypes.object.isRequired,\n    dispatch: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n    hashtags: ImmutablePropTypes.list,\n    isLoading: PropTypes.bool,\n    hasMore: PropTypes.bool,\n    multiColumn: PropTypes.bool,\n  };\n\n  componentDidMount() {\n    this.props.dispatch(fetchFollowedHashtags());\n  }\n\n  handleLoadMore = debounce(() => {\n    this.props.dispatch(expandFollowedHashtags());\n  }, 300, { leading: true });\n\n  render () {\n    const { intl, hashtags, isLoading, hasMore, multiColumn } = this.props;\n\n    const emptyMessage = <FormattedMessage id='empty_column.followed_tags' defaultMessage='You have not followed any hashtags yet. When you do, they will show up here.' />;\n\n    return (\n      <Column bindToDocument={!multiColumn}>\n        <ColumnHeader\n          icon='hashtag'\n          title={intl.formatMessage(messages.heading)}\n          showBackButton\n          multiColumn={multiColumn}\n        />\n\n        <ScrollableList\n          scrollKey='followed_tags'\n          emptyMessage={emptyMessage}\n          hasMore={hasMore}\n          isLoading={isLoading}\n          onLoadMore={this.handleLoadMore}\n          bindToDocument={!multiColumn}\n        >\n          {hashtags.map((hashtag) => (\n            <Hashtag\n              key={hashtag.get('name')}\n              name={hashtag.get('name')}\n              to={`/tags/${hashtag.get('name')}`}\n              withGraph={false}\n              // Taken from ImmutableHashtag. Should maybe refactor ImmutableHashtag to accept more options?\n              people={hashtag.getIn(['history', 0, 'accounts']) * 1 + hashtag.getIn(['history', 1, 'accounts']) * 1}\n              history={hashtag.get('history').reverse().map((day) => day.get('uses')).toArray()}\n            />\n          ))}\n        </ScrollableList>\n\n        <Helmet>\n          <meta name='robots' content='noindex' />\n        </Helmet>\n      </Column>\n    );\n  }\n\n}\n\nexport default connect(mapStateToProps)(injectIntl(FollowedTags));\n"],"sourceRoot":""}