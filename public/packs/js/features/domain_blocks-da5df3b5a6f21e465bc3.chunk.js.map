{"version":3,"sources":["webpack:///./app/javascript/mastodon/components/domain.tsx","webpack:///./app/javascript/mastodon/containers/domain_container.jsx","webpack:///./app/javascript/mastodon/features/domain_blocks/index.jsx"],"names":["messages","defineMessages","unblockDomain","id","defaultMessage","blockDomainConfirm","injectIntl","connect","makeMapStateToProps","mapStateToProps","mapDispatchToProps","dispatch","_ref","intl","onBlockDomain","domain","openModal","modalType","modalProps","message","_jsx","FormattedMessage","values","confirm","formatMessage","onConfirm","blockDomain","onUnblockDomain","useIntl","handleDomainUnblock","useCallback","className","IconButton","active","icon","title","onClick","heading","Blocks","ImmutablePureComponent","constructor","arguments","handleLoadMore","_debounce","this","props","expandDomainBlocks","leading","UNSAFE_componentWillMount","fetchDomainBlocks","render","domains","hasMore","multiColumn","Column","LoadingIndicator","emptyMessage","bindToDocument","ColumnBackButtonSlim","ScrollableList","scrollKey","onLoadMore","map","DomainContainer","Helmet","name","content","propTypes","params","PropTypes","object","isRequired","func","bool","ImmutablePropTypes","orderedSet","state","getIn"],"mappings":"mRAMA,MAAMA,EAAWC,YAAe,CAC9BC,cAAe,CACbC,GAAG,yBACHC,eAAe,6BCDbJ,EAAWC,YAAe,CAC9BI,mBAAoB,CAAEF,GAAG,qCAAuCC,eAAe,yBA0BlEE,kBAAWC,mBAvBEC,IACFC,KAAA,CAAS,KAKRC,CAACC,EAAQC,KAAA,IAAE,KAAEC,GAAMD,EAAA,MAAM,CAClDE,cAAeC,GACbJ,EAASK,YAAU,CACjBC,UAAW,UACXC,WAAY,CACVC,QAASC,YAACC,IAAgB,CAAClB,GAAE,qCAAsCC,eAAe,2RAA2RkB,OAAQ,CAAEP,OAAQK,YAAA,mBAASL,MACxYQ,QAASV,EAAKW,cAAcxB,EAASK,oBACrCoB,UAAWA,IAAMd,EAASe,YAAYX,OAG5C,EAEAY,gBAAiBZ,GACfJ,EAAST,YAAca,GACzB,EACD,GAEyBR,EDjBaK,IAAkC,IAAjC,OAAEG,EAAM,gBAAEY,GAAiBf,EACjE,MAAMC,EAAOe,cAEPC,EAAsBC,uBAAY,KACtCH,EAAgBZ,EAAO,GACtB,CAACA,EAAQY,IAEZ,OACEP,YAAA,OAAKW,UAAU,eAAQ,EACrBX,YAAA,OAAKW,UAAU,wBAAiB,EAC9BX,YAAA,QAAMW,UAAU,4BAAqB,EACnCX,YAAA,mBAASL,IAGXK,YAAA,OAAKW,UAAU,wBAAiB,EAC9BX,YAACY,IAAU,CACTC,QAAM,EACNC,KAAK,SACLC,MAAOtB,EAAKW,cAAcxB,EAASE,cAAe,CAAEa,WACpDqB,QAASP,MAIX,K,UEtBV,MAAM7B,EAAWC,YAAe,CAC9BoC,QAAS,CAAElC,GAAG,uBAAyBC,eAAe,mBACtDF,cAAe,CAAEC,GAAG,yBAA2BC,eAAe,6BAQhE,MAAMkC,UAAeC,IAAuBC,cAAA,SAAAC,WAAA,KAe1CC,eAAiBC,KAAS,KACxBC,KAAKC,MAAMlC,SAASmC,cAAqB,GACxC,IAAK,CAAEC,SAAS,GAAQ,CAN3BC,4BACEJ,KAAKC,MAAMlC,SAASsC,cACtB,CAMAC,SACE,MAAM,KAAErC,EAAI,QAAEsC,EAAO,QAAEC,EAAO,YAAEC,GAAgBT,KAAKC,MAErD,IAAKM,EACH,OACE/B,YAACkC,IAAM,UACLlC,YAACmC,IAAgB,KAKvB,MAAMC,EAAepC,YAACC,IAAgB,CAAClB,GAAE,6BAA8BC,eAAe,sCAEtF,OACEgB,YAACkC,IAAM,CAACG,gBAAiBJ,EAAanB,KAAK,eAAeG,QAASxB,EAAKW,cAAcxB,EAASqC,eAAS,EACtGjB,YAACsC,IAAoB,IAErBtC,YAACuC,IAAc,CACbC,UAAU,gBACVC,WAAYjB,KAAKF,eACjBU,QAASA,EACTI,aAAcA,EACdC,gBAAiBJ,QAAY,EAE5BF,EAAQW,KAAI/C,GACXK,YAAC2C,EAAe,CAAchD,OAAQA,GAAhBA,MAI1BK,YAAC4C,IAAM,UACL5C,YAAA,QAAM6C,KAAK,SAASC,QAAQ,aAIpC,EArDI5B,EAEG6B,UAAY,CACjBC,OAAQC,IAAUC,OAAOC,WACzB5D,SAAU0D,IAAUG,KAAKD,WACzBnB,QAASiB,IAAUI,KACnBtB,QAASuB,IAAmBC,WAC5B9D,KAAMwD,IAAUC,OAAOC,WACvBlB,YAAagB,IAAUI,MAiDZlE,6BA9DSqE,IAAK,CAC3BzB,QAASyB,EAAMC,MAAM,CAAC,eAAgB,SAAU,UAChDzB,UAAWwB,EAAMC,MAAM,CAAC,eAAgB,SAAU,YA4DrCtE,CAAyBD,YAAWgC,G","file":"js/features/domain_blocks-da5df3b5a6f21e465bc3.chunk.js","sourcesContent":["import { useCallback } from 'react';\n\nimport { defineMessages, useIntl } from 'react-intl';\n\nimport { IconButton } from './icon_button';\n\nconst messages = defineMessages({\n  unblockDomain: {\n    id: 'account.unblock_domain',\n    defaultMessage: 'Unblock domain {domain}',\n  },\n});\n\ninterface Props {\n  domain: string;\n  onUnblockDomain: (domain: string) => void;\n}\n\nexport const Domain: React.FC<Props> = ({ domain, onUnblockDomain }) => {\n  const intl = useIntl();\n\n  const handleDomainUnblock = useCallback(() => {\n    onUnblockDomain(domain);\n  }, [domain, onUnblockDomain]);\n\n  return (\n    <div className='domain'>\n      <div className='domain__wrapper'>\n        <span className='domain__domain-name'>\n          <strong>{domain}</strong>\n        </span>\n\n        <div className='domain__buttons'>\n          <IconButton\n            active\n            icon='unlock'\n            title={intl.formatMessage(messages.unblockDomain, { domain })}\n            onClick={handleDomainUnblock}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\n\nimport { connect } from 'react-redux';\n\nimport { blockDomain, unblockDomain } from '../actions/domain_blocks';\nimport { openModal } from '../actions/modal';\nimport { Domain } from '../components/domain';\n\nconst messages = defineMessages({\n  blockDomainConfirm: { id: 'confirmations.domain_block.confirm', defaultMessage: 'Block entire domain' },\n});\n\nconst makeMapStateToProps = () => {\n  const mapStateToProps = () => ({});\n\n  return mapStateToProps;\n};\n\nconst mapDispatchToProps = (dispatch, { intl }) => ({\n  onBlockDomain (domain) {\n    dispatch(openModal({\n      modalType: 'CONFIRM',\n      modalProps: {\n        message: <FormattedMessage id='confirmations.domain_block.message' defaultMessage='Are you really, really sure you want to block the entire {domain}? In most cases a few targeted blocks or mutes are sufficient and preferable. You will not see content from that domain in any public timelines or your notifications. Your followers from that domain will be removed.' values={{ domain: <strong>{domain}</strong> }} />,\n        confirm: intl.formatMessage(messages.blockDomainConfirm),\n        onConfirm: () => dispatch(blockDomain(domain)),\n      },\n    }));\n  },\n\n  onUnblockDomain (domain) {\n    dispatch(unblockDomain(domain));\n  },\n});\n\nexport default injectIntl(connect(makeMapStateToProps, mapDispatchToProps)(Domain));\n","import PropTypes from 'prop-types';\n\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\n\nimport { Helmet } from 'react-helmet';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport { connect } from 'react-redux';\n\nimport { debounce } from 'lodash';\n\nimport { fetchDomainBlocks, expandDomainBlocks } from '../../actions/domain_blocks';\nimport ColumnBackButtonSlim from '../../components/column_back_button_slim';\nimport { LoadingIndicator } from '../../components/loading_indicator';\nimport ScrollableList from '../../components/scrollable_list';\nimport DomainContainer from '../../containers/domain_container';\nimport Column from '../ui/components/column';\n\nconst messages = defineMessages({\n  heading: { id: 'column.domain_blocks', defaultMessage: 'Blocked domains' },\n  unblockDomain: { id: 'account.unblock_domain', defaultMessage: 'Unblock domain {domain}' },\n});\n\nconst mapStateToProps = state => ({\n  domains: state.getIn(['domain_lists', 'blocks', 'items']),\n  hasMore: !!state.getIn(['domain_lists', 'blocks', 'next']),\n});\n\nclass Blocks extends ImmutablePureComponent {\n\n  static propTypes = {\n    params: PropTypes.object.isRequired,\n    dispatch: PropTypes.func.isRequired,\n    hasMore: PropTypes.bool,\n    domains: ImmutablePropTypes.orderedSet,\n    intl: PropTypes.object.isRequired,\n    multiColumn: PropTypes.bool,\n  };\n\n  UNSAFE_componentWillMount () {\n    this.props.dispatch(fetchDomainBlocks());\n  }\n\n  handleLoadMore = debounce(() => {\n    this.props.dispatch(expandDomainBlocks());\n  }, 300, { leading: true });\n\n  render () {\n    const { intl, domains, hasMore, multiColumn } = this.props;\n\n    if (!domains) {\n      return (\n        <Column>\n          <LoadingIndicator />\n        </Column>\n      );\n    }\n\n    const emptyMessage = <FormattedMessage id='empty_column.domain_blocks' defaultMessage='There are no blocked domains yet.' />;\n\n    return (\n      <Column bindToDocument={!multiColumn} icon='minus-circle' heading={intl.formatMessage(messages.heading)}>\n        <ColumnBackButtonSlim />\n\n        <ScrollableList\n          scrollKey='domain_blocks'\n          onLoadMore={this.handleLoadMore}\n          hasMore={hasMore}\n          emptyMessage={emptyMessage}\n          bindToDocument={!multiColumn}\n        >\n          {domains.map(domain =>\n            <DomainContainer key={domain} domain={domain} />,\n          )}\n        </ScrollableList>\n\n        <Helmet>\n          <meta name='robots' content='noindex' />\n        </Helmet>\n      </Column>\n    );\n  }\n\n}\n\nexport default connect(mapStateToProps)(injectIntl(Blocks));\n"],"sourceRoot":""}